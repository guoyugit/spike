<html>
<head>
    <meta charset="utf-8">
    <script src="../js/jquery.min.js"></script>
</head>
<body>
<div>
    <h3>商品详情</h3>
    <div>
        <label>商品名</label>
        <div>
            <label id="title"></label>
        </div>
    </div>
    <div>
        <label>商品描述</label>
        <div>
            <label id="descp"></label>
        </div>
    </div>
    <div>
        <label>商品价格</label>
        <div>
            <label id="price"></label>
        </div>
    </div>
    <div>
        <label>商品图片</label>
        <div>
            <img style="width: 200px;height: auto;" id="imgUrl"/>
        </div>
    </div>
    <div>
        <label>商品库存</label>
        <div>
            <label id="stock"></label>
        </div>
    </div>
    <div>
        <label>商品销量</label>
        <div>
            <label id="sales"></label>
        </div>
    </div>

</div>
</body>
<script>
    jQuery(document).ready(function () {
        var g_itemVO = {};
        var loc = window.location.href;
        loc = loc.substring(loc.indexOf('?')+4,loc.length);
        //获取商品详情
        $.ajax({
            type: "GET",
            url: "http://localhost:8090/item/get",
            data:{
                id:loc
            },
            xhrFields: {withCredentials: true},
            success: function (data) {
                if (data.status == "success") {
                    g_itemVO = data.data;
                    reloadDom();
                } else {
                    alert("获取商品信息失败，原因：" + data.data.errMsg);
                }
            },
            error: function (data) {
                alert("获取商品信息失败，原因：" + data.responseText);
            }
        });

        function reloadDom() {
            $('#title').text(g_itemVO.title);//使用text不适用val是因为它对应的是一个dom
            $('#descp').text(g_itemVO.descp);
            $('#price').text(g_itemVO.price);
            $('#imgUrl').attr("src",g_itemVO.imgUrl);
            $('#stock').text(g_itemVO.stock);
            $('#sales').text(g_itemVO.sales);
        };
    });

</script>
</html>